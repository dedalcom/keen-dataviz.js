<<<<<<< 4b54b6df40739e790b71d16847e1e715992b36de
<<<<<<< a71c1725946c1b9519c36f58081f9043256d8664
<<<<<<< d024f1b73739ace28be88f83cabb3b11a70e703f
<<<<<<< 0a8c8fc64a82063537712f02f2c0a65c4f2bc930
<<<<<<< 501bd70f800a9e2d2b6afae92c66c2bac9d8e4b3
<<<<<<< aafff5b4c177c7f9306c9ec269a73a11165a70ac
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,q,j=[],n,p,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){q="funnel"}else{if(n.analysis_type==="extraction"){q="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){q="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){q="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-metric";j.push(n.group_by)}else{q="grouped-metric"}}else{if(n.interval&&!n.group_by){q="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-interval";j.push(n.group_by);j.push(l)}else{q="grouped-interval";j.push(l)}}}}}}}}}if(!q){if(typeof k.result==="number"){q="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){q="interval";j.push(l)}if(typeof k.result[0].result=="number"){q="grouped-metric"}if(k.result[0].value instanceof Array){q="grouped-interval";j.push(l)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){q="funnel";n.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){q="list"}if(!q){q="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(q){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}p=f.parser.apply(this,[q].concat(j));o=p(h(k,{query:n}));if(q.indexOf("interval")>-1){o.updateColumn(0,function(s,r){return new Date(s)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":19}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":19,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":17,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":17}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":17}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":17,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":17}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":17}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":17,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":17,"../../utils/extend":19}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(v){var t,u,w;if(typeof v.steps!=="undefined"&&typeof v.result!=="undefined"&&v.result instanceof Array){t=v.result;u=v.steps}else{if(typeof v.result.steps!=="undefined"&&typeof v.result.result!=="undefined"&&v.result.result instanceof Array){t=v.result.result;u=v.result.steps}}w=new b().type("funnel");w.appendColumn("Step Value");q(t,function(y,x){if(typeof u!=="undefined"&&u[x]){w.appendRow(u[x].event_collection,[y])}});return w}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":17,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(q){var g=b("./dataset"),l=b("./data");var o={"default":b("./libraries/default")(f)};var r=b("./utils/each"),p=b("./utils/extend"),m=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(t){if(!arguments.length){return this.view}var s=this.view;r(t,function(v,u){if(u==="chartType"){u="type"}s[u]=v});return this};f.prototype.call=function(s){s.call(this);return this};f.prototype.chartOptions=function(t){var s=this;if(!arguments.length){return this.view.chartOptions}if(t===null){this.view.chartOptions={}}else{if(typeof t==="object"){r(t,function(v,u){s.view.chartOptions[u]=(v?v:null)})}}return this};f.prototype.colors=function(s){if(!arguments.length){return this.view.colors}this.view.colors=(s instanceof Array?s:[]);return this};f.prototype.colorMapping=function(t){var s=this;if(!arguments.length){return this.view.colorMapping}if(t===null){this.view.colorMapping={}}else{if(typeof t==="object"){r(t,function(v,u){s.view.colorMapping[u]=(v?v:null)})}}return this};f.prototype.data=l;f.prototype.destroy=function(){var s=this.library(),u=this.type(),t=this.el();if(!t){this.message("A DOM element is required. Check out the .el() method.");throw"A DOM element is required. Check out the .el() method.";return}if(!u){this.message("A chart type is required. Check out the .type() method.");throw"A chart type is required. Check out the .type() method.";return}if(f.libraries[s]){if(typeof f.libraries[s][u]==="undefined"){u=j(u)}if(f.libraries[s][u]&&f.libraries[s][u].destroy){f.libraries[s][u].destroy.call(this)}}t.innerHTML="";this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(t){var s=this;if(!arguments.length){return this.view.el}k(function(){if(t&&t!==null){if(t.nodeName){s.view.el=t}else{if(document.querySelector){s.view.el=document.querySelector(t)}}}else{s.view.el=undefined}});return this};f.prototype.height=function(s){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(s))?parseInt(s):null);return this};f.prototype.indexBy=function(s){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(s?String(s):"timeframe.start");return this};f.prototype.labels=function(s){if(!arguments.length){return this.view.labels}this.view.labels=(s instanceof Array?s:[]);if(this.data()[0].length===2&&!m(this.data()[1][0])){this.dataset.updateColumn(0,function(u,t){if(this.view.labels[t-1]){return String(this.view.labels[t-1])}else{return u}}.bind(this))}else{this.dataset.updateRow(0,function(u,t){if(t>0&&this.view.labels[t-1]){return String(this.view.labels[t-1])}else{return u}}.bind(this))}return this};f.prototype.labelMapping=function(s){if(!arguments.length){return this.view.labelMapping}if(s===null){this.view.labelMapping={}}else{if(typeof s==="object"){r(s,function(u,t){this.view.labelMapping[t]=(u?u:null)}.bind(this))}}if(this.data()[0].length===2&&!m(this.data()[1][0])){this.dataset.updateColumn(0,function(t){if(this.view.labelMapping[t]){return String(this.view.labelMapping[t])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t){if(this.view.labelMapping[t]){return String(this.view.labelMapping[t])}else{return t}}.bind(this))}return this};f.prototype.library=function(s){if(!arguments.length){return this.view.library}this.view.library=(s?String(s):null);return this};f.prototype.message=function(){var s;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(s){if(!arguments.length){return this.view.notes}this.view.notes=(s?String(s):null);return this};f.prototype.prepare=function(){var t=this,s;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}k(function(){if(t.view._rendered){t.destroy()}if(t.el()){t.el().innerHTML="";s=f.libraries["default"].spinner;if(s.render){s.render.call(t)}t.view._prepared=true}});return this};f.prototype.render=function(){var u=this,s=f.libraries["default"].spinner,t=this.library(),w=this.type(),v=this.el();if(!this.el()){this.message("A DOM element is required. Check out the .el() method.");throw"A DOM element is required. Check out the .el() method.";return}if(!this.type()){this.message("A chart type is required. Check out the .type() method.");throw"A chart type is required. Check out the .type() method.";return}k(function(){if(u.view._prepared&&s.destroy){s.destroy.apply(u,arguments)}u.el().innerHTML="";if(f.libraries[t]){if(typeof f.libraries[t][w]==="undefined"){w=j(w)}if(f.libraries[t][w]&&f.libraries[t][w].render){n(u.el(),{notes:u.notes(),theme:u.theme(),title:u.title()});f.libraries[t][w].render.call(u);u.view._rendered=true}else{u.message("Incorrect chart type");throw"Incorrect chart type";return}}else{u.message("Incorrect library");throw"Incorrect library";return}});return this};f.prototype.sortGroups=function(s){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(s?String(s):null);if(this.view.sortGroups&&this.data().length>1){if(m(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(s){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(s?String(s):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(s){if(!arguments.length){return this.view.stacked}this.view.stacked=s?true:false;return this};f.prototype.theme=function(s){if(!arguments.length){return this.view.theme}this.view.theme=(s?String(s):null);return this};f.prototype.title=function(s){if(!arguments.length){return this.view.title}this.view.title=(s?String(s):null);return this};f.prototype.type=function(s){if(!arguments.length){return this.view.type}this.view.type=(s?String(s):null);return this};f.prototype.update=function(){var s=this.library(),u=this.type(),t=this.el();if(s&&u&&t&&f.libraries[s][u].update){f.libraries[s][u].update.apply(this,arguments)}return};f.prototype.width=function(s){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(s))?parseInt(s):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};p(f,{libraries:o,visuals:[]});f.register=function(s,t){f.libraries[s]=f.libraries[s]||{};r(t,function(v,u){f.libraries[s][u]=v})};f.find=function(u){if(!arguments.length){return f.visuals}var t=u.nodeName?u:document.querySelector(u),s=null;r(f.visuals,function(v){if(t==v.el()){s=v;return false}});return s};function n(u,s){var t="";t+='<div class="'+s.theme+'">';if(s.title){t+='<div class="'+s.theme+'-title">'+s.title+"</div>"}t+='<div class="'+s.theme+'-stage"><div class="'+s.theme+'-rendering"></div></div>';if(s.notes){t+='<div class="'+s.theme+'-notes">'+s.notes+"</div>"}t+="</div>";u.innerHTML=t}function j(t){var s={linechart:"line",barchart:"horizontal-bar",columnchart:"bar",areachart:"area",piechart:"pie"};return s[t]||t}function k(t){if("undefined"!==typeof document||"undefined"===typeof window){t();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function s(){document.removeEventListener("DOMContentLoaded",s,false);document.readyState="complete"},false);document.readyState="loading"}h(t)}function h(s){if(/in/.test(document.readyState)){setTimeout(function(){h(s)},9)}else{s()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(q.Keen){q.Keen.Dataviz=f}q.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":15,"./utils/assert-date-string":16,"./utils/each":17,"./utils/extend":19}],15:[function(j,b,t){var h=j("spin.js");var d=j("../utils/each"),q=j("../utils/extend"),n=j("../utils/extend-deep"),g=j("../utils/assert-date-string"),p=j("../utils/pretty-number");var l={};function a(v){var w,u;f(function(){if(w){clearTimeout(w)}u=(v.visuals.length>12)?1000:250;w=setTimeout(function(){d(v.visuals,function(x){if(x.view._artifacts.c3){x.view._artifacts.c3.resize()}})},u)});c();m();k();s();r();return l}function c(){var u=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];d(u,function(w,v){l[w]={render:function(){var z,x,y;z={axis:{},color:{},data:{order:null},legend:{}};x={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:q({},this.colorMapping()),columns:[],type:w.replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}};y=n({},z,this.chartOptions());y=n(y,x);y.color.pattern=x.color.pattern;y.data.colors=x.data.colors;y.data.columns=x.data.columns;if(w==="gauge"){y.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(w==="pie"||w==="donut"){y.data.columns=this.data().slice(1)}else{if(w.indexOf("horizontal-")>-1){y.axis.rotated=true}if(g(this.data()[1][0])){y.axis.x=y.axis.x||{};y.axis.x.type="timeseries";y.axis.x.tick=y.axis.x.tick||{format:o(this.data()[1][0],this.data()[2][0])};y.data.columns[0]=[];d(this.dataset.selectColumn(0),function(A,B){if(B>0){A=new Date(A)}y.data.columns[0][B]=A});y.data.columns[0][0]="x";y.data.x="x";if(this.stacked()&&this.data()[0].length>2){y.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{y.axis.x=y.axis.x||{};y.axis.x.type="category";y.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){y.data.groups=[this.dataset.selectRow(0).slice(1)]}}if(this.data()[0].length===2){y.legend.show=y.legend.show||false}d(this.data()[0],function(A,B){if(B>0){y.data.columns.push(this.dataset.selectColumn(B))}}.bind(this))}}this.view._artifacts.c3=c3.generate(y)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function f(u){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",u,true)}else{if(window.attachEvent){window.attachEvent("onresize",u)}}}function o(w,v){var x=Math.abs(new Date(w).getTime()-new Date(v).getTime());var u=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(x>=2419200000){return function(z){var y=new Date(z);return u[y.getMonth()]+" "+y.getFullYear()}}else{if(x>=86400000){return function(z){var y=new Date(z);return u[y.getMonth()]+" "+y.getDate()}}else{if(x>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function m(){l.message={render:function(y){var w=document.createElement("div"),v=document.createElement("div"),x=document.createElement("span"),u=this.height()||140;w.className=this.theme();v.className=this.theme()+"-message";v.style.height=String(u+"px");v.style.paddingTop=(u/2-12)+"px";v.style.width=String(this.width()+"px");x.innerHTML=y||"";v.appendChild(x);w.appendChild(v);this.el().innerHTML="";this.el().appendChild(w)},update:function(){this.render()},destroy:function(){}}}function k(){l.metric={render:function(){var y=this.theme(),B=this.title(),C=this.data()[1][1]||"-",E=this.height()||140,w=this.width(),v=this.chartOptions(),z="",A="",D="",u,x;u=C;if((typeof v.prettyNumber==="undefined"||v.prettyNumber===true)&&!isNaN(parseInt(C))){u=p(C)}if(v.prefix){A='<span class="'+y+'-metric-prefix">'+v.prefix+"</span>"}if(v.suffix){D='<span class="'+y+'-metric-suffix">'+v.suffix+"</span>"}z+='<div class="'+y+'">';z+='<div class="'+y+'-metric" style="width: '+(w?w+"px":"auto")+';" title="'+C+'">';z+='<span class="'+y+'-metric-value">'+A+u+D+"</span>";if(B){z+='<span class="'+y+'-metric-title">'+B+"</span>"}z+="</div>";z+="</div>";this.el().innerHTML=z;x=this.el().querySelector("."+y+"-metric-value");x.style.paddingTop=((E-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+y+"-metric").style.height=E+"px"},update:function(){this.render()},destroy:function(){}}}function s(){var u={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};l.spinner={render:function(){var v=this.height()||u.height,w=document.createElement("div"),x=document.createElement("div");w.className=this.theme();x.className=this.theme()+"-spinner";x.style.height=String(v+"px");x.style.position="relative";x.style.width=String(this.width()+"px");w.appendChild(x);this.el().innerHTML="";this.el().appendChild(w);this.view._artifacts.spinner=new h(u).spin(x)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function r(){var u={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};l.table={render:function(){var z=this.data(),x=this.el(),E=(this.height()||u.height)-this.el().offsetHeight,B=this.theme(),w=this.width()||u.width;var C="",D=new Array(z[0].length),F=new Array(z[0].length),v;d(z,function(G){d(G,function(H,I){if(!F[I]){F[I]=0}D[I]=(typeof H==="number")?"right":"left";F[I]=(String(H).length>F[I])?String(H).length:F[I]})});C+='<div class="'+B+'-table" style="height: '+(E?E+"px":"auto")+"; width: "+(w?w+"px":"auto")+';">';C+='<table class="'+B+'-table-dataset">';C+="<thead>";C+="<tr>";for(var A=0;A<z[0].length;A++){C+='<th style="width: '+(10*F[A])+"px; text-align: "+D[A]+';">'+z[0][A]+"</th>"}C+="</tr>";C+="</thead>";C+="<tbody>";for(var A=0;A<z.length;A++){if(A>0){C+="<tr>";for(var y=0;y<z[A].length;y++){C+='<td style="min-width: '+(10*F[y])+"px; text-align: "+D[y]+';">'+z[A][y]+"</td>"}C+="</tr>"}}C+="</tbody>";C+="</table>";C+='<table class="'+B+'-table-fixed-header">';C+="<thead>";C+="<tr>";for(var A=0;A<z[0].length;A++){C+='<th style="min-width: '+(10*F[A])+"px; text-align: "+D[A]+';">'+z[0][A]+"</th>"}C+="</tr>";C+="</thead>";C+="</table>";C+="</div>";x.querySelector("."+B+"-rendering").innerHTML=C;v=x.querySelector("."+B+"-table-fixed-header");x.querySelector("."+B+"-table").onscroll=function(G){v.style.top=G.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}b.exports=a},{"../utils/assert-date-string":16,"../utils/each":17,"../utils/extend":19,"../utils/extend-deep":18,"../utils/pretty-number":20,"spin.js":21}],16:[function(b,c,a){c.exports=function(d){if(typeof d==="object"&&typeof d.getTime==="function"&&!isNaN(d.getTime())){return true}else{if(typeof d==="string"&&!isNaN(d.split("-")[0])&&!isNaN(new Date(d).getTime())){return true}}return false}},{}],17:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],18:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(k,j){if((typeof h[j]!=="undefined"&&typeof k!=="undefined")&&(typeof h[j]==="object"&&typeof k==="object")&&(h[j]!==null&&k!==null)){d(h[j],k)}else{h[j]=k}})}return h}},{"./each":17}],19:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],20:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],21:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
=======
<<<<<<< e2e1a534965e90a0198549fdaf2ebe9a0537a872
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,q,j=[],n,p,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){q="funnel"}else{if(n.analysis_type==="extraction"){q="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){q="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){q="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-metric";j.push(n.group_by)}else{q="grouped-metric"}}else{if(n.interval&&!n.group_by){q="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-interval";j.push(n.group_by);j.push(l)}else{q="grouped-interval";j.push(l)}}}}}}}}}if(!q){if(typeof k.result==="number"){q="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){q="interval";j.push(l)}if(typeof k.result[0].result=="number"){q="grouped-metric"}if(k.result[0].value instanceof Array){q="grouped-interval";j.push(l)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){q="funnel";n.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){q="list"}if(!q){q="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(q){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}p=f.parser.apply(this,[q].concat(j));o=p(h(k,{query:n}));if(q.indexOf("interval")>-1){o.updateColumn(0,function(s,r){return new Date(s)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":19}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":19,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":17,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":17}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":17}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":17,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":17}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":17}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":17,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":17,"../../utils/extend":19}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b().type("funnel");u.appendColumn("Step Value");q(t.result,function(w,v){u.appendRow(t.query.steps[v].event_collection,[w])});return u}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":17,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(p){var g=b("./dataset"),k=b("./data");var n={"default":b("./libraries/default")(f)};var q=b("./utils/each"),o=b("./utils/extend"),l=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=k;f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&f.libraries[r][t].destroy){f.libraries[r][t].destroy.apply(this,arguments)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.apply(s,arguments)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(s&&v&&u&&f.libraries[s][v].render){m(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.apply(t,arguments);t.view._rendered=true}});return this};function m(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+r.title+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+r.notes+"</div>"}s+="</div>";t.innerHTML=s}f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(l(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?String(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};o(f,{libraries:n,visuals:[]});f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(p.Keen){p.Keen.Dataviz=f}p.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":15,"./utils/assert-date-string":16,"./utils/each":17,"./utils/extend":19}],15:[function(j,b,t){var h=j("spin.js");var d=j("../utils/each"),q=j("../utils/extend"),n=j("../utils/extend-deep"),g=j("../utils/assert-date-string"),p=j("../utils/pretty-number");var l={};function a(v){var w,u;f(function(){if(w){clearTimeout(w)}u=(v.visuals.length>12)?1000:250;w=setTimeout(function(){d(v.visuals,function(x){if(x.view._artifacts.c3){x.view._artifacts.c3.resize()}})},u)});c();m();k();s();r();return l}function c(){var u=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];d(u,function(w,v){l[w]={render:function(){var z,x,y;z={axis:{},color:{},data:{order:null}};x={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:q({},this.colorMapping()),columns:[],type:w.replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}};y=n({},z,this.chartOptions());y=n(y,x);y.color.pattern=x.color.pattern;y.data.colors=x.data.colors;y.data.columns=x.data.columns;if(w==="gauge"){y.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(w==="pie"||w==="donut"){y.data.columns=this.data().slice(1)}else{if(w.indexOf("horizontal-")>-1){y.axis.rotated=true}if(g(this.data()[1][0])){y.axis.x=y.axis.x||{};y.axis.x.type="timeseries";y.axis.x.tick=y.axis.x.tick||{format:o(this.data()[1][0],this.data()[2][0])};y.data.columns[0]=[];d(this.dataset.selectColumn(0),function(A,B){if(B>0){A=new Date(A)}y.data.columns[0][B]=A});y.data.columns[0][0]="x";y.data.x="x";if(this.stacked()&&this.data()[0].length>2){y.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{y.axis.x=y.axis.x||{};y.axis.x.type="category";y.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){y.data.groups=[this.dataset.selectRow(0).slice(1)]}}d(this.data()[0],function(A,B){if(B>0){y.data.columns.push(this.dataset.selectColumn(B))}}.bind(this))}}this.view._artifacts.c3=c3.generate(y)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function f(u){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",u,true)}else{if(window.attachEvent){window.attachEvent("onresize",u)}}}function o(w,v){var x=Math.abs(new Date(w).getTime()-new Date(v).getTime());var u=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(x>=2419200000){return function(z){var y=new Date(z);return u[y.getMonth()]+" "+y.getFullYear()}}else{if(x>=86400000){return function(z){var y=new Date(z);return u[y.getMonth()]+" "+y.getDate()}}else{if(x>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function m(){l.message={render:function(y){var w=document.createElement("div"),v=document.createElement("div"),x=document.createElement("span"),u=this.height()||140;w.className=this.theme();v.className=this.theme()+"-message";v.style.height=String(u+"px");v.style.paddingTop=(u/2-12)+"px";v.style.width=String(this.width()+"px");x.innerHTML=y||"";v.appendChild(x);w.appendChild(v);this.el().innerHTML="";this.el().appendChild(w)},update:function(){this.render()},destroy:function(){}}}function k(){l.metric={render:function(){var y=this.theme(),B=this.title(),C=this.data()[1][1]||"-",E=this.height()||140,w=this.width(),v=this.chartOptions(),z="",A="",D="",u,x;u=C;if((typeof v.prettyNumber==="undefined"||v.prettyNumber===true)&&!isNaN(parseInt(C))){u=p(C)}if(v.prefix){A='<span class="'+y+'-metric-prefix">'+v.prefix+"</span>"}if(v.suffix){D='<span class="'+y+'-metric-suffix">'+v.suffix+"</span>"}z+='<div class="'+y+'">';z+='<div class="'+y+'-metric" style="width: '+(w?w+"px":"auto")+';" title="'+C+'">';z+='<span class="'+y+'-metric-value">'+A+u+D+"</span>";if(B){z+='<span class="'+y+'-metric-title">'+B+"</span>"}z+="</div>";z+="</div>";this.el().innerHTML=z;x=this.el().querySelector("."+y+"-metric-value");x.style.paddingTop=((E-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+y+"-metric").style.height=E+"px"},update:function(){this.render()},destroy:function(){}}}function s(){var u={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};l.spinner={render:function(){var v=this.height()||u.height,w=document.createElement("div"),x=document.createElement("div");w.className=this.theme();x.className=this.theme()+"-spinner";x.style.height=String(v+"px");x.style.position="relative";x.style.width=String(this.width()+"px");w.appendChild(x);this.el().innerHTML="";this.el().appendChild(w);this.view._artifacts.spinner=new h(u).spin(x)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function r(){var u={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};l.table={render:function(){var z=this.data(),x=this.el(),E=(this.height()||u.height)-this.el().offsetHeight,B=this.theme(),w=this.width()||u.width;var C="",D=new Array(z[0].length),F=new Array(z[0].length),v;d(z,function(G){d(G,function(H,I){if(!F[I]){F[I]=0}D[I]=(typeof H==="number")?"right":"left";F[I]=(String(H).length>F[I])?String(H).length:F[I]})});C+='<div class="'+B+'-table" style="height: '+(E?E+"px":"auto")+"; width: "+(w?w+"px":"auto")+';">';C+='<table class="'+B+'-table-dataset">';C+="<thead>";C+="<tr>";for(var A=0;A<z[0].length;A++){C+='<th style="width: '+(10*F[A])+"px; text-align: "+D[A]+';">'+z[0][A]+"</th>"}C+="</tr>";C+="</thead>";C+="<tbody>";for(var A=0;A<z.length;A++){if(A>0){C+="<tr>";for(var y=0;y<z[A].length;y++){C+='<td style="min-width: '+(10*F[y])+"px; text-align: "+D[y]+';">'+z[A][y]+"</td>"}C+="</tr>"}}C+="</tbody>";C+="</table>";C+='<table class="'+B+'-table-fixed-header">';C+="<thead>";C+="<tr>";for(var A=0;A<z[0].length;A++){C+='<th style="min-width: '+(10*F[A])+"px; text-align: "+D[A]+';">'+z[0][A]+"</th>"}C+="</tr>";C+="</thead>";C+="</table>";C+="</div>";x.querySelector("."+B+"-rendering").innerHTML=C;v=x.querySelector("."+B+"-table-fixed-header");x.querySelector("."+B+"-table").onscroll=function(G){v.style.top=G.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}b.exports=a},{"../utils/assert-date-string":16,"../utils/each":17,"../utils/extend":19,"../utils/extend-deep":18,"../utils/pretty-number":20,"spin.js":21}],16:[function(b,c,a){c.exports=function(f){var d;if(!isNaN(new Date(f).getTime())&&typeof f==="string"){d=f.split("-");return !isNaN(d[0])&&d[0].length===4}return false}},{}],17:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],18:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(k,j){if((typeof h[j]!=="undefined"&&typeof k!=="undefined")&&(typeof h[j]==="object"&&typeof k==="object")&&(h[j]!==null&&k!==null)){d(h[j],k)}else{h[j]=k}})}return h}},{"./each":17}],19:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],20:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],21:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
=======
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,p,j=[],n,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){p="funnel"}else{if(n.analysis_type==="extraction"){p="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){p="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){p="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){p="double-grouped-metric";j.push(n.group_by)}else{p="grouped-metric"}}else{if(n.interval&&!n.group_by){p="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){p="double-grouped-interval";j.push(n.group_by);j.push(l)}else{p="grouped-interval";j.push(l)}}}}}}}}}if(!p){if(typeof k.result==="number"){p="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){p="interval";j.push(l)}if(typeof k.result[0].result=="number"){p="grouped-metric"}if(k.result[0].value instanceof Array){p="grouped-interval";j.push(l)}if(typeof k.result[0]=="number"&&typeof k.steps!=="undefined"){p="funnel"}if((typeof k.result[0]=="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){p="list"}if(!p){p="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(p){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}o=f.parser.apply(this,[p].concat(j))(k);if(p.indexOf("interval")>-1){o.updateColumn(0,function(r,q){return new Date(r)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":19}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":19,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":18,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":18}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":18}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":18,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":18}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":18}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":18,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":18,"../../utils/extend":19}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b().type("funnel");q(t.result,function(w,v){u.set(["Step Value",t.steps[v].event_collection],w)});return u}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":18,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(p){var g=b("./dataset"),k=b("./data");var n={"default":b("./libraries/default")()};var q=b("./utils/each"),o=b("./utils/extend"),l=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=k;f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&f.libraries[r][t].destroy){f.libraries[r][t].destroy.apply(this,arguments)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.apply(s,arguments)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(s&&v&&u&&f.libraries[s][v].render){m(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.apply(t,arguments);t.view._rendered=true}});return this};function m(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+r.title+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+r.notes+"</div>"}s+="</div>";t.innerHTML=s}f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(l(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?String(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};o(f,{libraries:n,visuals:[]});f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(p.Keen){p.Keen.Dataviz=f}p.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":16,"./utils/assert-date-string":17,"./utils/each":18,"./utils/extend":19}],15:[function(b,a,c){var h=b("../../utils/each");var d=b("../../utils/assert-date-string");function f(t,q){var o=t.internal.config.data_columns;var l=[];h(q.matrix[0],function(w,v){if(v>0){l.push(q.selectColumn(v))}});var r=0;var u=15;var s=Math.ceil(l.length/u);var n=l.slice(0,u);var m=g(t);var p=j(m,r,s);t.load({columns:o.concat(n),x:"x"});p.leftNav.on("click",function(){if(r===0){return}r=r-1;n=l.slice(r*u,(r+1)*u);k(p.counter,r,s);t.load({unload:t.data().map(function(v){return v.id}),columns:o.concat(n)})});p.rightNav.on("click",function(){if(r===s-1){return}r=r+1;n=l.slice(r*u,(r+1)*u);k(p.counter,r,s);t.load({unload:t.data().map(function(v){return v.id}),columns:o.concat(n)})})}function g(l){return d3.select(l.element).append("div").classed("paginated-legend",true).append("div").classed("legend-navigation",true)}function j(l,p,q){var n=l.append("span").classed("left",true).text("<-");var m=l.append("span").classed("counter",true).text((p+1)+" / "+q);var o=l.append("span").classed("right",true).text("->");return{leftNav:n,rightNav:o,counter:m}}function k(l,m,n){l.text((m+1)+" / "+n)}a.exports=f},{"../../utils/assert-date-string":17,"../../utils/each":18}],16:[function(j,c,t){var h=j("spin.js");var f=j("../utils/each"),q=j("../utils/extend"),g=j("../utils/assert-date-string"),p=j("../utils/pretty-number");var m=j("./c3_extentions/paginate-line");var l={};function a(){d();n();k();s();r();return l}function d(){var u=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];f(u,function(w,v){l[w]={render:function(){var x=this;var y=q({axis:{},bindto:this.el().querySelector("."+this.theme()+"-rendering"),data:{columns:[],type:w.replace("horizontal-",""),colors:q({},this.colorMapping()),order:null},color:{pattern:this.colors()},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}},this.chartOptions());if(w==="gauge"){y.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(w==="pie"||w==="donut"){y.data.columns=this.data().slice(1)}else{if(w.indexOf("horizontal-")>-1){y.axis.rotated=true}if(g(this.data()[1][0])){y.axis.x={type:"timeseries"};y.axis.x.tick=y.axis.x.tick||{format:o(this.data()[1][0],this.data()[2][0])};y.data.columns[0]=[];f(this.dataset.selectColumn(0),function(A,B){if(B>0){A=new Date(A)}y.data.columns[0][B]=A});y.data.columns[0][0]="x";y.data.x="x";if(this.stacked()&&this.data()[0].length>2){y.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{y.axis.x={type:"category",categories:this.dataset.selectColumn(0).slice(1)};if(this.stacked()&&this.data()[0].length>2){y.data.groups=[this.dataset.selectRow(0).slice(1)]}}}}this.view._artifacts.c3=c3.generate(y);if(w==="line"&&this.data()[0].length>15){var z=this.view._artifacts.c3;m(z,this.dataset)}else{f(this.data()[0],function(A,B){if(B>0){y.data.columns.push(x.dataset.selectColumn(B))}});this.view._artifacts.c3.load(y.data)}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function o(w,v){var x=Math.abs(new Date(w).getTime()-new Date(v).getTime());var u=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(x>=2419200000){return function(z){var y=new Date(z);return u[y.getMonth()]+" "+y.getFullYear()}}else{if(x>=86400000){return function(z){var y=new Date(z);return u[y.getMonth()]+" "+y.getDate()}}else{if(x>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function b(){}function n(){l.message={render:function(y){var w=document.createElement("div"),v=document.createElement("div"),x=document.createElement("span"),u=this.height()||140;w.className=this.theme();v.className=this.theme()+"-message";v.style.height=String(u+"px");v.style.paddingTop=(u/2-12)+"px";v.style.width=String(this.width()+"px");x.innerHTML=y||"";v.appendChild(x);w.appendChild(v);this.el().innerHTML="";this.el().appendChild(w)},update:function(){this.render()},destroy:function(){}}}function k(){l.metric={render:function(){var y=this.theme(),B=this.title(),C=this.data()[1][1]||"-",E=this.height()||140,w=this.width(),v=this.chartOptions(),z="",A="",D="",u,x;u=C;if((typeof v.prettyNumber==="undefined"||v.prettyNumber===true)&&!isNaN(parseInt(C))){u=p(C)}if(v.prefix){A='<span class="'+y+'-metric-prefix">'+v.prefix+"</span>"}if(v.suffix){D='<span class="'+y+'-metric-suffix">'+v.suffix+"</span>"}z+='<div class="'+y+'">';z+='<div class="'+y+'-metric" style="width: '+(w?w+"px":"auto")+';" title="'+C+'">';z+='<span class="'+y+'-metric-value">'+A+u+D+"</span>";if(B){z+='<span class="'+y+'-metric-title">'+B+"</span>"}z+="</div>";z+="</div>";this.el().innerHTML=z;x=this.el().querySelector("."+y+"-metric-value");x.style.paddingTop=((E-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+y+"-metric").style.height=E+"px"},update:function(){this.render()},destroy:function(){}}}function s(){var u={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};l.spinner={render:function(){var v=this.height()||u.height,w=document.createElement("div"),x=document.createElement("div");w.className=this.theme();x.className=this.theme()+"-spinner";x.style.height=String(v+"px");x.style.position="relative";x.style.width=String(this.width()+"px");w.appendChild(x);this.el().innerHTML="";this.el().appendChild(w);this.view._artifacts.spinner=new h(u).spin(x)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function r(){var u={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};l.table={render:function(){var z=this.data(),x=this.el(),E=(this.height()||u.height)-this.el().offsetHeight,B=this.theme(),w=this.width()||u.width;var C="",D=new Array(z[0].length),F=new Array(z[0].length),v;f(z,function(G){f(G,function(H,I){if(!F[I]){F[I]=0}D[I]=(typeof H==="number")?"right":"left";F[I]=(String(H).length>F[I])?String(H).length:F[I]})});C+='<div class="'+B+'-table" style="height: '+(E?E+"px":"auto")+"; width: "+(w?w+"px":"auto")+';">';C+='<table class="'+B+'-table-dataset">';C+="<thead>";C+="<tr>";for(var A=0;A<z[0].length;A++){C+='<th style="width: '+(10*F[A])+"px; text-align: "+D[A]+';">'+z[0][A]+"</th>"}C+="</tr>";C+="</thead>";C+="<tbody>";for(var A=0;A<z.length;A++){if(A>0){C+="<tr>";for(var y=0;y<z[A].length;y++){C+='<td style="min-width: '+(10*F[y])+"px; text-align: "+D[y]+';">'+z[A][y]+"</td>"}C+="</tr>"}}C+="</tbody>";C+="</table>";C+='<table class="'+B+'-table-fixed-header">';C+="<thead>";C+="<tr>";for(var A=0;A<z[0].length;A++){C+='<th style="min-width: '+(10*F[A])+"px; text-align: "+D[A]+';">'+z[0][A]+"</th>"}C+="</tr>";C+="</thead>";C+="</table>";C+="</div>";x.querySelector("."+B+"-rendering").innerHTML=C;v=x.querySelector("."+B+"-table-fixed-header");x.querySelector("."+B+"-table").onscroll=function(G){v.style.top=G.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}c.exports=a},{"../utils/assert-date-string":17,"../utils/each":18,"../utils/extend":19,"../utils/pretty-number":20,"./c3_extentions/paginate-line":15,"spin.js":21}],17:[function(b,c,a){c.exports=function(f){var d;if(!isNaN(new Date(f).getTime())&&typeof f==="string"){d=f.split("-");return !isNaN(d[0])&&d[0].length===4}return false}},{}],18:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],19:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],20:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],21:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
>>>>>>> Paginated line graphs
>>>>>>> Paginated line graphs
=======
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,q,j=[],n,p,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){q="funnel"}else{if(n.analysis_type==="extraction"){q="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){q="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){q="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-metric";j.push(n.group_by)}else{q="grouped-metric"}}else{if(n.interval&&!n.group_by){q="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-interval";j.push(n.group_by);j.push(l)}else{q="grouped-interval";j.push(l)}}}}}}}}}if(!q){if(typeof k.result==="number"){q="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){q="interval";j.push(l)}if(typeof k.result[0].result=="number"){q="grouped-metric"}if(k.result[0].value instanceof Array){q="grouped-interval";j.push(l)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){q="funnel";n.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){q="list"}if(!q){q="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(q){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}p=f.parser.apply(this,[q].concat(j));o=p(h(k,{query:n}));if(q.indexOf("interval")>-1){o.updateColumn(0,function(s,r){return new Date(s)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":22}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":22,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":20,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":20}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":20}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":20,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":20}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":20}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":20,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":20,"../../utils/extend":22}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b().type("funnel");u.appendColumn("Step Value");q(t.result,function(w,v){u.appendRow(t.query.steps[v].event_collection,[w])});return u}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":20,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(p){var g=b("./dataset"),k=b("./data");var n={"default":b("./libraries/default")(f)};var q=b("./utils/each"),o=b("./utils/extend"),l=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,summarized:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=k;f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&f.libraries[r][t].destroy){f.libraries[r][t].destroy.apply(this,arguments)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.apply(s,arguments)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(s&&v&&u&&f.libraries[s][v].render){m(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.apply(t,arguments);t.view._rendered=true}});return this};function m(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+r.title+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+r.notes+"</div>"}s+="</div>";t.innerHTML=s}f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(l(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.summarized=function(r){if(!arguments.length){return this.view.summarized}this.view.summarized=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?String(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};o(f,{libraries:n,visuals:[]});f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(p.Keen){p.Keen.Dataviz=f}p.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":18,"./utils/assert-date-string":19,"./utils/each":20,"./utils/extend":22}],15:[function(b,c,a){function d(g,h){this.chart=g;this.totalPages=h;this.navigation=this._buildLegendNavigation();var f=this._buildNavigationItems();this.leftNav=f.leftNav;this.rightNav=f.rightNav;this.counter=f.counter}d.prototype.updateCounter=function(f,g){this.counter.text((f+1)+" / "+g)};d.prototype._buildLegendNavigation=function(){return d3.select(this.chart.element).append("div").classed("paginated-legend",true).append("div").classed("legend-navigation",true)};d.prototype._buildNavigationItems=function(){var g=this.navigation.append("span").classed("left",true).text("<-");var f=this.navigation.append("span").classed("counter",true).text("1 / "+this.totalPages);var h=this.navigation.append("span").classed("right",true).text("->");return{leftNav:g,rightNav:h,counter:f}};c.exports=d},{}],16:[function(c,d,a){var g=c("../../utils/each");var b=c("./legend-navigation");function f(p,l){var k=p.internal.config.data_columns;var h=[];g(l.matrix[0],function(s,r){if(r>0){h.push(l.selectColumn(r))}});var m=0;var q=15;var n=Math.ceil(h.length/q);var j=h.slice(0,q);p.load({columns:k.concat(j)});var o=new b(p,n);o.leftNav.on("click",function(){if(m===0){return}m=m-1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})});o.rightNav.on("click",function(){if(m===n-1){return}m=m+1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})})}d.exports=f},{"../../utils/each":20,"./legend-navigation":15}],17:[function(f,g,b){var j=f("../../utils/each");var d=f("./legend-navigation");function c(m,q){var k=m.internal.config.data_columns;var o=[];j(q.matrix[0],function(t,s){if(s>0){o.push(q.selectColumn(s))}});var l=0;var p=15;var n=Math.ceil(o.length/p);m.load({unload:m.data().map(function(s){return s.id}),columns:h(o,0,p),colors:{Other:"#aaa"}});var r=new d(m,n);r.leftNav.on("click",function(){if(l===0){return}l=l-1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})});r.rightNav.on("click",function(){if(l===n-1){return}l=l+1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})})}function h(l,k,n){var o=k*n;var m=o+n;return a(l,o,m).concat(l.slice(o,m))}function a(l,q,n){var p=l.slice(0,q).concat(l.slice(n,l.length));var o=["Other"];for(var k=1;k<p[0].length;k++){var m=p.reduce(function(s,t,r){return s+p[r][k]},0);o.push(m)}return[o]}g.exports=c},{"../../utils/each":20,"./legend-navigation":15}],18:[function(l,b,x){var k=l("spin.js");var f=l("../utils/each"),t=l("../utils/extend"),q=l("../utils/extend-deep"),j=l("../utils/assert-date-string"),s=l("../utils/pretty-number");var m=l("./c3_extentions/paginate-chart");var g=l("./c3_extentions/summarize-chart");var o={};function a(z){var A,y;h(function(){if(A){clearTimeout(A)}y=(z.visuals.length>12)?1000:250;A=setTimeout(function(){f(z.visuals,function(B){if(B.view._artifacts.c3){B.view._artifacts.c3.resize()}})},y)});d();p();n();w();v();return o}function d(){var y=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];f(y,function(A,z){o[A]={render:function(){var D,B,C;D={axis:{},color:{},data:{order:null}};B={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:t({},this.colorMapping()),columns:[],type:A.replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}};C=q({},D,this.chartOptions());C=q(C,B);C.color.pattern=B.color.pattern;C.data.colors=B.data.colors;C.data.columns=B.data.columns;if(A==="gauge"){C.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(A==="pie"||A==="donut"){C.data.columns=this.data().slice(1)}else{if(A.indexOf("horizontal-")>-1){C.axis.rotated=true}if(j(this.data()[1][0])){C.axis.x=C.axis.x||{};C.axis.x.type="timeseries";C.axis.x.tick=C.axis.x.tick||{format:r(this.data()[1][0],this.data()[2][0])};C.data.columns[0]=[];f(this.dataset.selectColumn(0),function(E,F){if(F>0){E=new Date(E)}C.data.columns[0][F]=E});C.data.columns[0][0]="x";C.data.x="x";if(this.stacked()&&this.data()[0].length>2){C.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{C.axis.x=C.axis.x||{};C.axis.x.type="category";C.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){C.data.groups=[["Other"].concat(this.dataset.selectRow(0).slice(1))]}}}}this.view._artifacts.c3=c3.generate(C);if(c(A,this)){m(this.view._artifacts.c3,this.dataset)}else{if(u(A,this)){g(this.view._artifacts.c3,this.dataset)}else{f(this.data()[0],function(E,F){if(F>0){C.data.columns.push(this.dataset.selectColumn(F))}}.bind(this));this.view._artifacts.c3.load(C.data)}}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function h(y){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",y,true)}else{if(window.attachEvent){window.attachEvent("onresize",y)}}}function r(A,z){var B=Math.abs(new Date(A).getTime()-new Date(z).getTime());var y=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(B>=2419200000){return function(D){var C=new Date(D);return y[C.getMonth()]+" "+C.getFullYear()}}else{if(B>=86400000){return function(D){var C=new Date(D);return y[C.getMonth()]+" "+C.getDate()}}else{if(B>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function c(y,A){var z=["area","bar","line","step","spline"];return z.indexOf(y)>-1&&A.data()[0].length>15&&!A.summarized()}function u(y,A){var z=["area","bar"];return z.indexOf(y)>-1&&A.data()[0].length>15&&A.summarized()}function p(){o.message={render:function(C){var A=document.createElement("div"),z=document.createElement("div"),B=document.createElement("span"),y=this.height()||140;A.className=this.theme();z.className=this.theme()+"-message";z.style.height=String(y+"px");z.style.paddingTop=(y/2-12)+"px";z.style.width=String(this.width()+"px");B.innerHTML=C||"";z.appendChild(B);A.appendChild(z);this.el().innerHTML="";this.el().appendChild(A)},update:function(){this.render()},destroy:function(){}}}function n(){o.metric={render:function(){var C=this.theme(),F=this.title(),G=this.data()[1][1]||"-",I=this.height()||140,A=this.width(),z=this.chartOptions(),D="",E="",H="",y,B;y=G;if((typeof z.prettyNumber==="undefined"||z.prettyNumber===true)&&!isNaN(parseInt(G))){y=s(G)}if(z.prefix){E='<span class="'+C+'-metric-prefix">'+z.prefix+"</span>"}if(z.suffix){H='<span class="'+C+'-metric-suffix">'+z.suffix+"</span>"}D+='<div class="'+C+'">';D+='<div class="'+C+'-metric" style="width: '+(A?A+"px":"auto")+';" title="'+G+'">';D+='<span class="'+C+'-metric-value">'+E+y+H+"</span>";if(F){D+='<span class="'+C+'-metric-title">'+F+"</span>"}D+="</div>";D+="</div>";this.el().innerHTML=D;B=this.el().querySelector("."+C+"-metric-value");B.style.paddingTop=((I-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+C+"-metric").style.height=I+"px"},update:function(){this.render()},destroy:function(){}}}function w(){var y={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};o.spinner={render:function(){var z=this.height()||y.height,A=document.createElement("div"),B=document.createElement("div");A.className=this.theme();B.className=this.theme()+"-spinner";B.style.height=String(z+"px");B.style.position="relative";B.style.width=String(this.width()+"px");A.appendChild(B);this.el().innerHTML="";this.el().appendChild(A);this.view._artifacts.spinner=new k(y).spin(B)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function v(){var y={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};o.table={render:function(){var D=this.data(),B=this.el(),I=(this.height()||y.height)-this.el().offsetHeight,F=this.theme(),A=this.width()||y.width;var G="",H=new Array(D[0].length),J=new Array(D[0].length),z;f(D,function(K){f(K,function(L,M){if(!J[M]){J[M]=0}H[M]=(typeof L==="number")?"right":"left";J[M]=(String(L).length>J[M])?String(L).length:J[M]})});G+='<div class="'+F+'-table" style="height: '+(I?I+"px":"auto")+"; width: "+(A?A+"px":"auto")+';">';G+='<table class="'+F+'-table-dataset">';G+="<thead>";G+="<tr>";for(var E=0;E<D[0].length;E++){G+='<th style="width: '+(10*J[E])+"px; text-align: "+H[E]+';">'+D[0][E]+"</th>"}G+="</tr>";G+="</thead>";G+="<tbody>";for(var E=0;E<D.length;E++){if(E>0){G+="<tr>";for(var C=0;C<D[E].length;C++){G+='<td style="min-width: '+(10*J[C])+"px; text-align: "+H[C]+';">'+D[E][C]+"</td>"}G+="</tr>"}}G+="</tbody>";G+="</table>";G+='<table class="'+F+'-table-fixed-header">';G+="<thead>";G+="<tr>";for(var E=0;E<D[0].length;E++){G+='<th style="min-width: '+(10*J[E])+"px; text-align: "+H[E]+';">'+D[0][E]+"</th>"}G+="</tr>";G+="</thead>";G+="</table>";G+="</div>";B.querySelector("."+F+"-rendering").innerHTML=G;z=B.querySelector("."+F+"-table-fixed-header");B.querySelector("."+F+"-table").onscroll=function(K){z.style.top=K.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}b.exports=a},{"../utils/assert-date-string":19,"../utils/each":20,"../utils/extend":22,"../utils/extend-deep":21,"../utils/pretty-number":23,"./c3_extentions/paginate-chart":16,"./c3_extentions/summarize-chart":17,"spin.js":24}],19:[function(b,c,a){c.exports=function(f){var d;if(!isNaN(new Date(f).getTime())&&typeof f==="string"){d=f.split("-");return !isNaN(d[0])&&d[0].length===4}return false}},{}],20:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],21:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(k,j){if((typeof h[j]!=="undefined"&&typeof k!=="undefined")&&(typeof h[j]==="object"&&typeof k==="object")&&(h[j]!==null&&k!==null)){d(h[j],k)}else{h[j]=k}})}return h}},{"./each":20}],22:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],23:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],24:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
>>>>>>> support pagination for other chart types
=======
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,q,j=[],n,p,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){q="funnel"}else{if(n.analysis_type==="extraction"){q="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){q="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){q="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-metric";j.push(n.group_by)}else{q="grouped-metric"}}else{if(n.interval&&!n.group_by){q="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-interval";j.push(n.group_by);j.push(l)}else{q="grouped-interval";j.push(l)}}}}}}}}}if(!q){if(typeof k.result==="number"){q="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){q="interval";j.push(l)}if(typeof k.result[0].result=="number"){q="grouped-metric"}if(k.result[0].value instanceof Array){q="grouped-interval";j.push(l)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){q="funnel";n.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){q="list"}if(!q){q="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(q){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}p=f.parser.apply(this,[q].concat(j));o=p(h(k,{query:n}));if(q.indexOf("interval")>-1){o.updateColumn(0,function(s,r){return new Date(s)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":23}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":23,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":21,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":21}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":21}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":21}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":21}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":21,"../../utils/extend":23}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b().type("funnel");u.appendColumn("Step Value");q(t.result,function(w,v){u.appendRow(t.query.steps[v].event_collection,[w])});return u}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":21,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(p){var g=b("./dataset"),k=b("./data");var n={"default":b("./libraries/default")(f)};var q=b("./utils/each"),o=b("./utils/extend"),l=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,summarize:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=k;f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&f.libraries[r][t].destroy){f.libraries[r][t].destroy.apply(this,arguments)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.apply(s,arguments)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(s&&v&&u&&f.libraries[s][v].render){m(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.apply(t,arguments);t.view._rendered=true}});return this};function m(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+r.title+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+r.notes+"</div>"}s+="</div>";t.innerHTML=s}f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(l(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.summarize=function(r){if(!arguments.length){return this.view.summarize}this.view.summarize=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?String(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return};f.prototype.visibilityThreshold=function(r){if(!arguments.length){return this.view.visibilityThreshold}this.view.visibilityThreshold=(!isNaN(parseFloat(r))?parseFloat(r):null);return this};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};o(f,{libraries:n,visuals:[]});f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(p.Keen){p.Keen.Dataviz=f}p.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":19,"./utils/assert-date-string":20,"./utils/each":21,"./utils/extend":23}],15:[function(b,c,a){function d(g,h){this.chart=g;this.totalPages=h;this.navigation=this._buildLegendNavigation();var f=this._buildNavigationItems();this.leftNav=f.leftNav;this.rightNav=f.rightNav;this.counter=f.counter}d.prototype.updateCounter=function(f,g){this.counter.text((f+1)+" / "+g)};d.prototype._buildLegendNavigation=function(){return d3.select(this.chart.element).append("div").classed("paginated-legend",true).append("div").classed("legend-navigation",true)};d.prototype._buildNavigationItems=function(){var g=this.navigation.append("span").classed("left",true).text("<-");var f=this.navigation.append("span").classed("counter",true).text("1 / "+this.totalPages);var h=this.navigation.append("span").classed("right",true).text("->");return{leftNav:g,rightNav:h,counter:f}};c.exports=d},{}],16:[function(c,d,a){var g=c("../../utils/each");var b=c("./legend-navigation");function f(p,l){var k=p.internal.config.data_columns;var h=[];g(l.matrix[0],function(s,r){if(r>0){h.push(l.selectColumn(r))}});var m=0;var q=15;var n=Math.ceil(h.length/q);var j=h.slice(0,q);p.load({columns:k.concat(j)});var o=new b(p,n);o.leftNav.on("click",function(){if(m===0){return}m=m-1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})});o.rightNav.on("click",function(){if(m===n-1){return}m=m+1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})})}d.exports=f},{"../../utils/each":21,"./legend-navigation":15}],17:[function(b,c,a){function d(k,o,h){if(o){var l=h.reduce(function(p,q){return p+q[1]},0);var m=[];var f=[];for(var j=0;j<h.length;j++){var n=h[j][1];if(n/l>o){m.push(h[j])}else{f.push(h[j])}}var g=f.reduce(function(p,q){return p+q[1]},0);k.load({unload:k.data().map(function(p){return p.id}),columns:m.concat([["Other",g]])})}}c.exports=d},{}],18:[function(f,g,b){var j=f("../../utils/each");var d=f("./legend-navigation");function c(m,q){var k=m.internal.config.data_columns;var o=[];j(q.matrix[0],function(t,s){if(s>0){o.push(q.selectColumn(s))}});var l=0;var p=15;var n=Math.ceil(o.length/p);m.load({unload:m.data().map(function(s){return s.id}),columns:h(o,0,p),colors:{Other:"#aaa"}});var r=new d(m,n);r.leftNav.on("click",function(){if(l===0){return}l=l-1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})});r.rightNav.on("click",function(){if(l===n-1){return}l=l+1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})})}function h(l,k,n){var o=k*n;var m=o+n;return a(l,o,m).concat(l.slice(o,m))}function a(l,q,n){var p=l.slice(0,q).concat(l.slice(n,l.length));var o=["Other"];for(var k=1;k<p[0].length;k++){var m=p.reduce(function(s,t,r){return s+p[r][k]},0);o.push(m)}return[o]}g.exports=c},{"../../utils/each":21,"./legend-navigation":15}],19:[function(l,b,y){var k=l("spin.js");var f=l("../utils/each"),u=l("../utils/extend"),q=l("../utils/extend-deep"),j=l("../utils/assert-date-string"),t=l("../utils/pretty-number");var m=l("./c3_extentions/paginate-chart");var g=l("./c3_extentions/summarize-chart");var s=l("./c3_extentions/render-pie-chart");var o={};function a(A){var B,z;h(function(){if(B){clearTimeout(B)}z=(A.visuals.length>12)?1000:250;B=setTimeout(function(){f(A.visuals,function(C){if(C.view._artifacts.c3){C.view._artifacts.c3.resize()}})},z)});d();p();n();x();w();return o}function d(){var z=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];f(z,function(B,A){o[B]={render:function(){var E,C,D;E={axis:{},color:{},data:{order:null}};C={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:u({},this.colorMapping()),columns:[],type:B.replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}};D=q({},E,this.chartOptions());D=q(D,C);D.color.pattern=C.color.pattern;D.data.colors=C.data.colors;D.data.columns=C.data.columns;if(B==="gauge"){D.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(B==="pie"||B==="donut"){D.data.columns=this.data().slice(1)}else{if(B.indexOf("horizontal-")>-1){D.axis.rotated=true}if(j(this.data()[1][0])){D.axis.x=D.axis.x||{};D.axis.x.type="timeseries";D.axis.x.tick=D.axis.x.tick||{format:r(this.data()[1][0],this.data()[2][0])};D.data.columns[0]=[];f(this.dataset.selectColumn(0),function(F,G){if(G>0){F=new Date(F)}D.data.columns[0][G]=F});D.data.columns[0][0]="x";D.data.x="x";if(this.stacked()&&this.data()[0].length>2){D.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{D.axis.x=D.axis.x||{};D.axis.x.type="category";D.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){D.data.groups=[["Other"].concat(this.dataset.selectRow(0).slice(1))]}}}}this.view._artifacts.c3=c3.generate(D);if(c(B,this)){m(this.view._artifacts.c3,this.dataset)}else{if(v(B,this)){g(this.view._artifacts.c3,this.dataset)}else{if(B==="donut"||B==="pie"){s(this.view._artifacts.c3,this.view.visibilityThreshold,this.data().slice(1))}else{f(this.data()[0],function(F,G){if(G>0){D.data.columns.push(this.dataset.selectColumn(G))}}.bind(this));this.view._artifacts.c3.load(D.data)}}}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function h(z){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",z,true)}else{if(window.attachEvent){window.attachEvent("onresize",z)}}}function r(B,A){var C=Math.abs(new Date(B).getTime()-new Date(A).getTime());var z=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(C>=2419200000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getFullYear()}}else{if(C>=86400000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getDate()}}else{if(C>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function c(z,B){var A=["area","bar","line","step","spline"];return A.indexOf(z)>-1&&B.data()[0].length>15&&!B.summarize()}function v(z,B){var A=["area","bar"];return A.indexOf(z)>-1&&B.data()[0].length>15&&B.summarize()}function p(){o.message={render:function(D){var B=document.createElement("div"),A=document.createElement("div"),C=document.createElement("span"),z=this.height()||140;B.className=this.theme();A.className=this.theme()+"-message";A.style.height=String(z+"px");A.style.paddingTop=(z/2-12)+"px";A.style.width=String(this.width()+"px");C.innerHTML=D||"";A.appendChild(C);B.appendChild(A);this.el().innerHTML="";this.el().appendChild(B)},update:function(){this.render()},destroy:function(){}}}function n(){o.metric={render:function(){var D=this.theme(),G=this.title(),H=this.data()[1][1]||"-",J=this.height()||140,B=this.width(),A=this.chartOptions(),E="",F="",I="",z,C;z=H;if((typeof A.prettyNumber==="undefined"||A.prettyNumber===true)&&!isNaN(parseInt(H))){z=t(H)}if(A.prefix){F='<span class="'+D+'-metric-prefix">'+A.prefix+"</span>"}if(A.suffix){I='<span class="'+D+'-metric-suffix">'+A.suffix+"</span>"}E+='<div class="'+D+'">';E+='<div class="'+D+'-metric" style="width: '+(B?B+"px":"auto")+';" title="'+H+'">';E+='<span class="'+D+'-metric-value">'+F+z+I+"</span>";if(G){E+='<span class="'+D+'-metric-title">'+G+"</span>"}E+="</div>";E+="</div>";this.el().innerHTML=E;C=this.el().querySelector("."+D+"-metric-value");C.style.paddingTop=((J-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+D+"-metric").style.height=J+"px"},update:function(){this.render()},destroy:function(){}}}function x(){var z={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};o.spinner={render:function(){var A=this.height()||z.height,B=document.createElement("div"),C=document.createElement("div");B.className=this.theme();C.className=this.theme()+"-spinner";C.style.height=String(A+"px");C.style.position="relative";C.style.width=String(this.width()+"px");B.appendChild(C);this.el().innerHTML="";this.el().appendChild(B);this.view._artifacts.spinner=new k(z).spin(C)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function w(){var z={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};o.table={render:function(){var E=this.data(),C=this.el(),J=(this.height()||z.height)-this.el().offsetHeight,G=this.theme(),B=this.width()||z.width;var H="",I=new Array(E[0].length),K=new Array(E[0].length),A;f(E,function(L){f(L,function(M,N){if(!K[N]){K[N]=0}I[N]=(typeof M==="number")?"right":"left";K[N]=(String(M).length>K[N])?String(M).length:K[N]})});H+='<div class="'+G+'-table" style="height: '+(J?J+"px":"auto")+"; width: "+(B?B+"px":"auto")+';">';H+='<table class="'+G+'-table-dataset">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="<tbody>";for(var F=0;F<E.length;F++){if(F>0){H+="<tr>";for(var D=0;D<E[F].length;D++){H+='<td style="min-width: '+(10*K[D])+"px; text-align: "+I[D]+';">'+E[F][D]+"</td>"}H+="</tr>"}}H+="</tbody>";H+="</table>";H+='<table class="'+G+'-table-fixed-header">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="min-width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="</table>";H+="</div>";C.querySelector("."+G+"-rendering").innerHTML=H;A=C.querySelector("."+G+"-table-fixed-header");C.querySelector("."+G+"-table").onscroll=function(L){A.style.top=L.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}b.exports=a},{"../utils/assert-date-string":20,"../utils/each":21,"../utils/extend":23,"../utils/extend-deep":22,"../utils/pretty-number":24,"./c3_extentions/paginate-chart":16,"./c3_extentions/render-pie-chart":17,"./c3_extentions/summarize-chart":18,"spin.js":25}],20:[function(b,c,a){c.exports=function(f){var d;if(!isNaN(new Date(f).getTime())&&typeof f==="string"){d=f.split("-");return !isNaN(d[0])&&d[0].length===4}return false}},{}],21:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],22:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(k,j){if((typeof h[j]!=="undefined"&&typeof k!=="undefined")&&(typeof h[j]==="object"&&typeof k==="object")&&(h[j]!==null&&k!==null)){d(h[j],k)}else{h[j]=k}})}return h}},{"./each":21}],23:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],24:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],25:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
>>>>>>> visibilityThreshold for pie/donut charts
=======
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,q,j=[],n,p,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){q="funnel"}else{if(n.analysis_type==="extraction"){q="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){q="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){q="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-metric";j.push(n.group_by)}else{q="grouped-metric"}}else{if(n.interval&&!n.group_by){q="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-interval";j.push(n.group_by);j.push(l)}else{q="grouped-interval";j.push(l)}}}}}}}}}if(!q){if(typeof k.result==="number"){q="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){q="interval";j.push(l)}if(typeof k.result[0].result=="number"){q="grouped-metric"}if(k.result[0].value instanceof Array){q="grouped-interval";j.push(l)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){q="funnel";n.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){q="list"}if(!q){q="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(q){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}p=f.parser.apply(this,[q].concat(j));o=p(h(k,{query:n}));if(q.indexOf("interval")>-1){o.updateColumn(0,function(s,r){return new Date(s)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":23}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":23,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":21,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":21}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":21}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":21}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":21}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":21,"../../utils/extend":23}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b().type("funnel");u.appendColumn("Step Value");q(t.result,function(w,v){u.appendRow(t.query.steps[v].event_collection,[w])});return u}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":21,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(p){var g=b("./dataset"),k=b("./data");var n={"default":b("./libraries/default")(f)};var q=b("./utils/each"),o=b("./utils/extend"),l=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,summarize:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=k;f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&f.libraries[r][t].destroy){f.libraries[r][t].destroy.apply(this,arguments)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.apply(s,arguments)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(s&&v&&u&&f.libraries[s][v].render){m(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.apply(t,arguments);t.view._rendered=true}});return this};function m(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+r.title+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+r.notes+"</div>"}s+="</div>";t.innerHTML=s}f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(l(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.summarize=function(r){if(!arguments.length){return this.view.summarize}this.view.summarize=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?String(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return};f.prototype.visibilityThreshold=function(r){if(!arguments.length){return this.view.visibilityThreshold}this.view.visibilityThreshold=(!isNaN(parseFloat(r))?parseFloat(r):null);return this};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};o(f,{libraries:n,visuals:[]});f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(p.Keen){p.Keen.Dataviz=f}p.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":19,"./utils/assert-date-string":20,"./utils/each":21,"./utils/extend":23}],15:[function(b,c,a){function d(g,h){this.chart=g;this.totalPages=h;this.navigation=this._buildLegendNavigation();var f=this._buildNavigationItems();this.leftNav=f.leftNav;this.rightNav=f.rightNav;this.counter=f.counter}d.prototype.updateCounter=function(f,g){this.counter.text((f+1)+" / "+g)};d.prototype._buildLegendNavigation=function(){return d3.select(this.chart.element).append("div").classed("paginated-legend",true).append("div").classed("legend-navigation",true)};d.prototype._buildNavigationItems=function(){var g=this.navigation.append("span").classed("left",true).text("<-");var f=this.navigation.append("span").classed("counter",true).text("1 / "+this.totalPages);var h=this.navigation.append("span").classed("right",true).text("->");return{leftNav:g,rightNav:h,counter:f}};c.exports=d},{}],16:[function(c,d,a){var g=c("../../utils/each");var b=c("./legend-navigation");function f(p,l){var k=p.internal.config.data_columns;var h=[];g(l.matrix[0],function(s,r){if(r>0){h.push(l.selectColumn(r))}});var m=0;var q=15;var n=Math.ceil(h.length/q);var j=h.slice(0,q);p.load({columns:k.concat(j)});var o=new b(p,n);o.leftNav.on("click",function(){if(m===0){return}m=m-1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})});o.rightNav.on("click",function(){if(m===n-1){return}m=m+1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})})}d.exports=f},{"../../utils/each":21,"./legend-navigation":15}],17:[function(b,c,a){function d(k,p,h){if(p){var m=h.reduce(function(q,r){return q+r[1]},0);var n=[];var f=[];for(var j=0;j<h.length;j++){var o=h[j][1];if(o/m>p){n.push(h[j])}else{f.push(h[j])}}var g=f.reduce(function(q,r){return q+r[1]},0);var l="Other (Generated)";k.load({unload:k.data().map(function(q){return q.id}),columns:n.concat([[l,g]])})}}c.exports=d},{}],18:[function(f,g,b){var j=f("../../utils/each");var d=f("./legend-navigation");function c(m,q){var k=m.internal.config.data_columns;var o=[];j(q.matrix[0],function(t,s){if(s>0){o.push(q.selectColumn(s))}});var l=0;var p=15;var n=Math.ceil(o.length/p);m.load({groups:[m.groups()[0].concat(["Other (Generated)"])],unload:m.data().map(function(s){return s.id}),columns:h(o,0,p)});var r=new d(m,n);r.leftNav.on("click",function(){if(l===0){return}l=l-1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})});r.rightNav.on("click",function(){if(l===n-1){return}l=l+1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})})}function h(l,k,n){var o=k*n;var m=o+n;return a(l,o,m).concat(l.slice(o,m))}function a(l,q,n){var p=l.slice(0,q).concat(l.slice(n,l.length));var o=["Other (Generated)"];for(var k=1;k<p[0].length;k++){var m=p.reduce(function(s,t,r){return s+p[r][k]},0);o.push(m)}return[o]}g.exports=c},{"../../utils/each":21,"./legend-navigation":15}],19:[function(l,b,y){var k=l("spin.js");var f=l("../utils/each"),u=l("../utils/extend"),q=l("../utils/extend-deep"),j=l("../utils/assert-date-string"),t=l("../utils/pretty-number");var m=l("./c3_extentions/paginate-chart");var g=l("./c3_extentions/summarize-chart");var s=l("./c3_extentions/render-pie-chart");var o={};function a(A){var B,z;h(function(){if(B){clearTimeout(B)}z=(A.visuals.length>12)?1000:250;B=setTimeout(function(){f(A.visuals,function(C){if(C.view._artifacts.c3){C.view._artifacts.c3.resize()}})},z)});d();p();n();x();w();return o}function d(){var z=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];f(z,function(B,A){o[B]={render:function(){var E,C,D;E={axis:{},color:{},data:{order:null}};C={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:u({},this.colorMapping()),columns:[],type:B.replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}};D=q({},E,this.chartOptions());D=q(D,C);D.color.pattern=C.color.pattern;D.data.colors=C.data.colors;D.data.columns=C.data.columns;if(B==="gauge"){D.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(B==="pie"||B==="donut"){D.data.columns=this.data().slice(1)}else{if(B.indexOf("horizontal-")>-1){D.axis.rotated=true}if(j(this.data()[1][0])){D.axis.x=D.axis.x||{};D.axis.x.type="timeseries";D.axis.x.tick=D.axis.x.tick||{format:r(this.data()[1][0],this.data()[2][0])};D.data.columns[0]=[];f(this.dataset.selectColumn(0),function(F,G){if(G>0){F=new Date(F)}D.data.columns[0][G]=F});D.data.columns[0][0]="x";D.data.x="x";if(this.stacked()&&this.data()[0].length>2){D.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{D.axis.x=D.axis.x||{};D.axis.x.type="category";D.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){D.data.groups=[["Other (Generated)"].concat(this.dataset.selectRow(0).slice(1))]}}}}this.view._artifacts.c3=c3.generate(D);if(c(B,this)){m(this.view._artifacts.c3,this.dataset)}else{if(v(B,this)){g(this.view._artifacts.c3,this.dataset)}else{if(B==="donut"||B==="pie"){s(this.view._artifacts.c3,this.view.visibilityThreshold,this.data().slice(1))}else{f(this.data()[0],function(F,G){if(G>0){D.data.columns.push(this.dataset.selectColumn(G))}}.bind(this));this.view._artifacts.c3.load(D.data)}}}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function h(z){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",z,true)}else{if(window.attachEvent){window.attachEvent("onresize",z)}}}function r(B,A){var C=Math.abs(new Date(B).getTime()-new Date(A).getTime());var z=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(C>=2419200000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getFullYear()}}else{if(C>=86400000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getDate()}}else{if(C>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function c(z,B){var A=["area","bar","line","step","spline"];return A.indexOf(z)>-1&&B.data()[0].length>15&&!B.summarize()}function v(z,B){var A=["area","bar"];return A.indexOf(z)>-1&&B.data()[0].length>15&&B.summarize()}function p(){o.message={render:function(D){var B=document.createElement("div"),A=document.createElement("div"),C=document.createElement("span"),z=this.height()||140;B.className=this.theme();A.className=this.theme()+"-message";A.style.height=String(z+"px");A.style.paddingTop=(z/2-12)+"px";A.style.width=String(this.width()+"px");C.innerHTML=D||"";A.appendChild(C);B.appendChild(A);this.el().innerHTML="";this.el().appendChild(B)},update:function(){this.render()},destroy:function(){}}}function n(){o.metric={render:function(){var D=this.theme(),G=this.title(),H=this.data()[1][1]||"-",J=this.height()||140,B=this.width(),A=this.chartOptions(),E="",F="",I="",z,C;z=H;if((typeof A.prettyNumber==="undefined"||A.prettyNumber===true)&&!isNaN(parseInt(H))){z=t(H)}if(A.prefix){F='<span class="'+D+'-metric-prefix">'+A.prefix+"</span>"}if(A.suffix){I='<span class="'+D+'-metric-suffix">'+A.suffix+"</span>"}E+='<div class="'+D+'">';E+='<div class="'+D+'-metric" style="width: '+(B?B+"px":"auto")+';" title="'+H+'">';E+='<span class="'+D+'-metric-value">'+F+z+I+"</span>";if(G){E+='<span class="'+D+'-metric-title">'+G+"</span>"}E+="</div>";E+="</div>";this.el().innerHTML=E;C=this.el().querySelector("."+D+"-metric-value");C.style.paddingTop=((J-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+D+"-metric").style.height=J+"px"},update:function(){this.render()},destroy:function(){}}}function x(){var z={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};o.spinner={render:function(){var A=this.height()||z.height,B=document.createElement("div"),C=document.createElement("div");B.className=this.theme();C.className=this.theme()+"-spinner";C.style.height=String(A+"px");C.style.position="relative";C.style.width=String(this.width()+"px");B.appendChild(C);this.el().innerHTML="";this.el().appendChild(B);this.view._artifacts.spinner=new k(z).spin(C)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function w(){var z={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};o.table={render:function(){var E=this.data(),C=this.el(),J=(this.height()||z.height)-this.el().offsetHeight,G=this.theme(),B=this.width()||z.width;var H="",I=new Array(E[0].length),K=new Array(E[0].length),A;f(E,function(L){f(L,function(M,N){if(!K[N]){K[N]=0}I[N]=(typeof M==="number")?"right":"left";K[N]=(String(M).length>K[N])?String(M).length:K[N]})});H+='<div class="'+G+'-table" style="height: '+(J?J+"px":"auto")+"; width: "+(B?B+"px":"auto")+';">';H+='<table class="'+G+'-table-dataset">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="<tbody>";for(var F=0;F<E.length;F++){if(F>0){H+="<tr>";for(var D=0;D<E[F].length;D++){H+='<td style="min-width: '+(10*K[D])+"px; text-align: "+I[D]+';">'+E[F][D]+"</td>"}H+="</tr>"}}H+="</tbody>";H+="</table>";H+='<table class="'+G+'-table-fixed-header">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="min-width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="</table>";H+="</div>";C.querySelector("."+G+"-rendering").innerHTML=H;A=C.querySelector("."+G+"-table-fixed-header");C.querySelector("."+G+"-table").onscroll=function(L){A.style.top=L.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}b.exports=a},{"../utils/assert-date-string":20,"../utils/each":21,"../utils/extend":23,"../utils/extend-deep":22,"../utils/pretty-number":24,"./c3_extentions/paginate-chart":16,"./c3_extentions/render-pie-chart":17,"./c3_extentions/summarize-chart":18,"spin.js":25}],20:[function(b,c,a){c.exports=function(f){var d;if(!isNaN(new Date(f).getTime())&&typeof f==="string"){d=f.split("-");return !isNaN(d[0])&&d[0].length===4}return false}},{}],21:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],22:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(k,j){if((typeof h[j]!=="undefined"&&typeof k!=="undefined")&&(typeof h[j]==="object"&&typeof k==="object")&&(h[j]!==null&&k!==null)){d(h[j],k)}else{h[j]=k}})}return h}},{"./each":21}],23:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],24:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],25:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
>>>>>>> Rename 'Other' category to 'Other (Generated)
=======
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,q,j=[],n,p,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){q="funnel"}else{if(n.analysis_type==="extraction"){q="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){q="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){q="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-metric";j.push(n.group_by)}else{q="grouped-metric"}}else{if(n.interval&&!n.group_by){q="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-interval";j.push(n.group_by);j.push(l)}else{q="grouped-interval";j.push(l)}}}}}}}}}if(!q){if(typeof k.result==="number"){q="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){q="interval";j.push(l)}if(typeof k.result[0].result=="number"){q="grouped-metric"}if(k.result[0].value instanceof Array){q="grouped-interval";j.push(l)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){q="funnel";n.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){q="list"}if(!q){q="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(q){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}p=f.parser.apply(this,[q].concat(j));o=p(h(k,{query:n}));if(q.indexOf("interval")>-1){o.updateColumn(0,function(s,r){return new Date(s)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":23}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":23,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":21,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":21}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":21}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":21}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":21}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":21,"../../utils/extend":23}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b().type("funnel");u.appendColumn("Step Value");q(t.result,function(w,v){u.appendRow(t.query.steps[v].event_collection,[w])});return u}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":21,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(p){var g=b("./dataset"),k=b("./data");var n={"default":b("./libraries/default")(f)};var q=b("./utils/each"),o=b("./utils/extend"),l=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,paginate:true,sortGroups:undefined,sortIntervals:undefined,stacked:false,summarize:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=k;f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&f.libraries[r][t].destroy){f.libraries[r][t].destroy.apply(this,arguments)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.paginate=function(r){if(!arguments.length){return this.view.paginate}if(r===null){this.view.paginate=true}else{this.view.paginate=r}return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.apply(s,arguments)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(s&&v&&u&&f.libraries[s][v].render){m(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.apply(t,arguments);t.view._rendered=true}});return this};function m(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+r.title+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+r.notes+"</div>"}s+="</div>";t.innerHTML=s}f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(l(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.summarize=function(r){if(!arguments.length){return this.view.summarize}this.view.summarize=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?String(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return};f.prototype.visibilityThreshold=function(r){if(!arguments.length){return this.view.visibilityThreshold}this.view.visibilityThreshold=(!isNaN(parseFloat(r))?parseFloat(r):null);return this};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};o(f,{libraries:n,visuals:[]});f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(p.Keen){p.Keen.Dataviz=f}p.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":19,"./utils/assert-date-string":20,"./utils/each":21,"./utils/extend":23}],15:[function(b,c,a){function d(g,h){this.chart=g;this.totalPages=h;this.navigation=this._buildLegendNavigation();var f=this._buildNavigationItems();this.leftNav=f.leftNav;this.rightNav=f.rightNav;this.counter=f.counter}d.prototype.updateCounter=function(f,g){this.counter.text((f+1)+" / "+g)};d.prototype._buildLegendNavigation=function(){return d3.select(this.chart.element).append("div").classed("paginated-legend",true).append("div").classed("legend-navigation",true)};d.prototype._buildNavigationItems=function(){var g=this.navigation.append("span").classed("left",true).text("<-");var f=this.navigation.append("span").classed("counter",true).text("1 / "+this.totalPages);var h=this.navigation.append("span").classed("right",true).text("->");return{leftNav:g,rightNav:h,counter:f}};c.exports=d},{}],16:[function(c,d,a){var g=c("../../utils/each");var b=c("./legend-navigation");function f(p,l){var k=p.internal.config.data_columns;var h=[];g(l.matrix[0],function(s,r){if(r>0){h.push(l.selectColumn(r))}});var m=0;var q=15;var n=Math.ceil(h.length/q);var j=h.slice(0,q);p.load({columns:k.concat(j)});var o=new b(p,n);o.leftNav.on("click",function(){if(m===0){return}m=m-1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})});o.rightNav.on("click",function(){if(m===n-1){return}m=m+1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})})}d.exports=f},{"../../utils/each":21,"./legend-navigation":15}],17:[function(b,c,a){function d(k,p,h){if(p){var m=h.reduce(function(q,r){return q+r[1]},0);var n=[];var f=[];for(var j=0;j<h.length;j++){var o=h[j][1];if(o/m>p){n.push(h[j])}else{f.push(h[j])}}var g=f.reduce(function(q,r){return q+r[1]},0);var l="Other (Generated)";k.load({unload:k.data().map(function(q){return q.id}),columns:n.concat([[l,g]])})}}c.exports=d},{}],18:[function(f,g,b){var j=f("../../utils/each");var d=f("./legend-navigation");function c(m,q){var k=m.internal.config.data_columns;var o=[];j(q.matrix[0],function(t,s){if(s>0){o.push(q.selectColumn(s))}});var l=0;var p=15;var n=Math.ceil(o.length/p);m.load({groups:[m.groups()[0].concat(["Other (Generated)"])],unload:m.data().map(function(s){return s.id}),columns:h(o,0,p)});var r=new d(m,n);r.leftNav.on("click",function(){if(l===0){return}l=l-1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})});r.rightNav.on("click",function(){if(l===n-1){return}l=l+1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})})}function h(l,k,n){var o=k*n;var m=o+n;return a(l,o,m).concat(l.slice(o,m))}function a(l,q,n){var p=l.slice(0,q).concat(l.slice(n,l.length));var o=["Other (Generated)"];for(var k=1;k<p[0].length;k++){var m=p.reduce(function(s,t,r){return s+p[r][k]},0);o.push(m)}return[o]}g.exports=c},{"../../utils/each":21,"./legend-navigation":15}],19:[function(l,b,y){var k=l("spin.js");var f=l("../utils/each"),u=l("../utils/extend"),q=l("../utils/extend-deep"),j=l("../utils/assert-date-string"),t=l("../utils/pretty-number");var m=l("./c3_extentions/paginate-chart");var g=l("./c3_extentions/summarize-chart");var s=l("./c3_extentions/render-pie-chart");var o={};function a(A){var B,z;h(function(){if(B){clearTimeout(B)}z=(A.visuals.length>12)?1000:250;B=setTimeout(function(){f(A.visuals,function(C){if(C.view._artifacts.c3){C.view._artifacts.c3.resize()}})},z)});d();p();n();x();w();return o}function d(){var z=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];f(z,function(B,A){o[B]={render:function(){var E,C,D;E={axis:{},color:{},data:{order:null}};C={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:u({},this.colorMapping()),columns:[],type:B.replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}};D=q({},E,this.chartOptions());D=q(D,C);D.color.pattern=C.color.pattern;D.data.colors=C.data.colors;D.data.columns=C.data.columns;if(B==="gauge"){D.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(B==="pie"||B==="donut"){D.data.columns=this.data().slice(1)}else{if(B.indexOf("horizontal-")>-1){D.axis.rotated=true}if(j(this.data()[1][0])){D.axis.x=D.axis.x||{};D.axis.x.type="timeseries";D.axis.x.tick=D.axis.x.tick||{format:r(this.data()[1][0],this.data()[2][0])};D.data.columns[0]=[];f(this.dataset.selectColumn(0),function(F,G){if(G>0){F=new Date(F)}D.data.columns[0][G]=F});D.data.columns[0][0]="x";D.data.x="x";if(this.stacked()&&this.data()[0].length>2){D.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{D.axis.x=D.axis.x||{};D.axis.x.type="category";D.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){D.data.groups=[["Other (Generated)"].concat(this.dataset.selectRow(0).slice(1))]}}}}this.view._artifacts.c3=c3.generate(D);if(c(B,this)){m(this.view._artifacts.c3,this.dataset)}else{if(v(B,this)){g(this.view._artifacts.c3,this.dataset)}else{if(B==="donut"||B==="pie"){s(this.view._artifacts.c3,this.view.visibilityThreshold,this.data().slice(1))}else{f(this.data()[0],function(F,G){if(G>0){D.data.columns.push(this.dataset.selectColumn(G))}}.bind(this));this.view._artifacts.c3.load(D.data)}}}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function h(z){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",z,true)}else{if(window.attachEvent){window.attachEvent("onresize",z)}}}function r(B,A){var C=Math.abs(new Date(B).getTime()-new Date(A).getTime());var z=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(C>=2419200000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getFullYear()}}else{if(C>=86400000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getDate()}}else{if(C>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function c(z,B){var A=["area","bar","line","step","spline"];return A.indexOf(z)>-1&&B.data()[0].length>15&&B.paginate()&&!B.summarize()}function v(z,B){var A=["area","bar"];return A.indexOf(z)>-1&&B.data()[0].length>15&&B.summarize()}function p(){o.message={render:function(D){var B=document.createElement("div"),A=document.createElement("div"),C=document.createElement("span"),z=this.height()||140;B.className=this.theme();A.className=this.theme()+"-message";A.style.height=String(z+"px");A.style.paddingTop=(z/2-12)+"px";A.style.width=String(this.width()+"px");C.innerHTML=D||"";A.appendChild(C);B.appendChild(A);this.el().innerHTML="";this.el().appendChild(B)},update:function(){this.render()},destroy:function(){}}}function n(){o.metric={render:function(){var D=this.theme(),G=this.title(),H=this.data()[1][1]||"-",J=this.height()||140,B=this.width(),A=this.chartOptions(),E="",F="",I="",z,C;z=H;if((typeof A.prettyNumber==="undefined"||A.prettyNumber===true)&&!isNaN(parseInt(H))){z=t(H)}if(A.prefix){F='<span class="'+D+'-metric-prefix">'+A.prefix+"</span>"}if(A.suffix){I='<span class="'+D+'-metric-suffix">'+A.suffix+"</span>"}E+='<div class="'+D+'">';E+='<div class="'+D+'-metric" style="width: '+(B?B+"px":"auto")+';" title="'+H+'">';E+='<span class="'+D+'-metric-value">'+F+z+I+"</span>";if(G){E+='<span class="'+D+'-metric-title">'+G+"</span>"}E+="</div>";E+="</div>";this.el().innerHTML=E;C=this.el().querySelector("."+D+"-metric-value");C.style.paddingTop=((J-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+D+"-metric").style.height=J+"px"},update:function(){this.render()},destroy:function(){}}}function x(){var z={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};o.spinner={render:function(){var A=this.height()||z.height,B=document.createElement("div"),C=document.createElement("div");B.className=this.theme();C.className=this.theme()+"-spinner";C.style.height=String(A+"px");C.style.position="relative";C.style.width=String(this.width()+"px");B.appendChild(C);this.el().innerHTML="";this.el().appendChild(B);this.view._artifacts.spinner=new k(z).spin(C)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function w(){var z={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};o.table={render:function(){var E=this.data(),C=this.el(),J=(this.height()||z.height)-this.el().offsetHeight,G=this.theme(),B=this.width()||z.width;var H="",I=new Array(E[0].length),K=new Array(E[0].length),A;f(E,function(L){f(L,function(M,N){if(!K[N]){K[N]=0}I[N]=(typeof M==="number")?"right":"left";K[N]=(String(M).length>K[N])?String(M).length:K[N]})});H+='<div class="'+G+'-table" style="height: '+(J?J+"px":"auto")+"; width: "+(B?B+"px":"auto")+';">';H+='<table class="'+G+'-table-dataset">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="<tbody>";for(var F=0;F<E.length;F++){if(F>0){H+="<tr>";for(var D=0;D<E[F].length;D++){H+='<td style="min-width: '+(10*K[D])+"px; text-align: "+I[D]+';">'+E[F][D]+"</td>"}H+="</tr>"}}H+="</tbody>";H+="</table>";H+='<table class="'+G+'-table-fixed-header">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="min-width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="</table>";H+="</div>";C.querySelector("."+G+"-rendering").innerHTML=H;A=C.querySelector("."+G+"-table-fixed-header");C.querySelector("."+G+"-table").onscroll=function(L){A.style.top=L.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}b.exports=a},{"../utils/assert-date-string":20,"../utils/each":21,"../utils/extend":23,"../utils/extend-deep":22,"../utils/pretty-number":24,"./c3_extentions/paginate-chart":16,"./c3_extentions/render-pie-chart":17,"./c3_extentions/summarize-chart":18,"spin.js":25}],20:[function(b,c,a){c.exports=function(f){var d;if(!isNaN(new Date(f).getTime())&&typeof f==="string"){d=f.split("-");return !isNaN(d[0])&&d[0].length===4}return false}},{}],21:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],22:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(k,j){if((typeof h[j]!=="undefined"&&typeof k!=="undefined")&&(typeof h[j]==="object"&&typeof k==="object")&&(h[j]!==null&&k!==null)){d(h[j],k)}else{h[j]=k}})}return h}},{"./each":21}],23:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],24:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],25:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
>>>>>>> add 'paginate' method, set default to true
=======
(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,a){var f=c("./dataset");var h=c("./utils/extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j;return this}else{return g.call(this,j)}};function g(k){var o,l,q,j=[],n,p,m;l=this.indexBy()?this.indexBy():"timestamp.start";n=(typeof k.query!=="undefined")?k.query:{};n=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},n);if(n.analysis_type==="funnel"){q="funnel"}else{if(n.analysis_type==="extraction"){q="extraction"}else{if(n.analysis_type==="select_unique"){if(!n.group_by&&!n.interval){q="list"}}else{if(n.analysis_type){if(!n.group_by&&!n.interval){q="metric"}else{if(n.group_by&&!n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-metric";j.push(n.group_by)}else{q="grouped-metric"}}else{if(n.interval&&!n.group_by){q="interval";j.push(l)}else{if(n.group_by&&n.interval){if(n.group_by instanceof Array&&n.group_by.length>1){q="double-grouped-interval";j.push(n.group_by);j.push(l)}else{q="grouped-interval";j.push(l)}}}}}}}}}if(!q){if(typeof k.result==="number"){q="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){q="interval";j.push(l)}if(typeof k.result[0].result=="number"){q="grouped-metric"}if(k.result[0].value instanceof Array){q="grouped-interval";j.push(l)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){q="funnel";n.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){q="list"}if(!q){q="extraction"}}}if(!this.title()){this.title(b(n))}if(!this.type()){switch(q){case"metric":m="metric";break;case"interval":m="area";break;case"grouped-metric":case"double-grouped-metric":m="bar";break;case"grouped-interval":case"double-grouped-interval":m="line";break;case"funnel":m="horizontal-bar";break;case"list":case"extraction":default:m="table"}this.type(m)}p=f.parser.apply(this,[q].concat(j));o=p(h(k,{query:n}));if(q.indexOf("interval")>-1){o.updateColumn(0,function(s,r){return new Date(s)})}this.dataset=o;return this}function b(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}},{"./dataset":2,"./utils/extend":23}],2:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};f.prototype.type=function(s){if(!arguments.length){return this.meta.type}this.meta.type=(s?String(s):undefined);return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}if(m.Keen){m.Keen.Dataset=f}m.Dataset=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataset=f}d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":23,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":21,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":21}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":21}],6:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":21}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":21}],9:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":21,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":21,"../../utils/extend":23}],11:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){return new b().set(["Value","Result"],t.result).type("metric")}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b().type("grouped-metric");q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b().type("grouped-interval");q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-metric");q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b().type("double-grouped-interval");q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b().type("funnel");u.appendColumn("Step Value");q(t.result,function(w,v){u.appendRow(t.query.steps[v].event_collection,[w])});return u}}function l(){return function(t){var u=new b().type("list");q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b().type("extraction");q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":21,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(p){var g=b("./dataset"),k=b("./data");var n={"default":b("./libraries/default")(f)};var q=b("./utils/each"),o=b("./utils/extend"),l=b("./utils/assert-date-string");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,paginate:true,sortGroups:undefined,sortIntervals:undefined,stacked:false,summarize:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=k;f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&f.libraries[r][t].destroy){f.libraries[r][t].destroy.apply(this,arguments)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!l(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return String(this.view.labelMapping[s])}else{return s}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.paginate=function(r){if(!arguments.length){return this.view.paginate}if(r===null){this.view.paginate=true}else{this.view.paginate=r}return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.apply(s,arguments)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(s&&v&&u&&f.libraries[s][v].render){m(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.apply(t,arguments);t.view._rendered=true}});return this};function m(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+r.title+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+r.notes+"</div>"}s+="</div>";t.innerHTML=s}f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(l(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.summarize=function(r){if(!arguments.length){return this.view.summarize}this.view.summarize=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?String(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return};f.prototype.visibilityThreshold=function(r){if(!arguments.length){return this.view.visibilityThreshold}this.view.visibilityThreshold=(!isNaN(parseFloat(r))?parseFloat(r):null);return this};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};o(f,{libraries:n,visuals:[]});f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}if(p.Keen){p.Keen.Dataviz=f}p.Dataviz=f;if(typeof d!=="undefined"){if(d.Keen){d.Keen.Dataviz=f}d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries/default":19,"./utils/assert-date-string":20,"./utils/each":21,"./utils/extend":23}],15:[function(b,c,a){function d(g,h){this.chart=g;this.totalPages=h;this.navigation=this._buildLegendNavigation();var f=this._buildNavigationItems();this.leftNav=f.leftNav;this.rightNav=f.rightNav;this.counter=f.counter}d.prototype.updateCounter=function(f,g){this.counter.text((f+1)+" / "+g)};d.prototype._buildLegendNavigation=function(){return d3.select(this.chart.element).append("div").classed("paginated-legend",true).append("div").classed("legend-navigation",true)};d.prototype._buildNavigationItems=function(){var g=this.navigation.append("div").attr("class","left arrow");var f=this.navigation.append("span").classed("counter",true).text("1 / "+this.totalPages);var h=this.navigation.append("div").attr("class","right arrow");return{leftNav:g,rightNav:h,counter:f}};c.exports=d},{}],16:[function(c,d,a){var g=c("../../utils/each");var b=c("./legend-navigation");function f(p,l){var k=p.internal.config.data_columns;var h=[];g(l.matrix[0],function(s,r){if(r>0){h.push(l.selectColumn(r))}});var m=0;var q=15;var n=Math.ceil(h.length/q);var j=h.slice(0,q);p.load({columns:k.concat(j)});var o=new b(p,n);o.leftNav.on("click",function(){if(m===0){return}m=m-1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})});o.rightNav.on("click",function(){if(m===n-1){return}m=m+1;j=h.slice(m*q,(m+1)*q);o.updateCounter(m,n);p.load({unload:p.data().map(function(r){return r.id}),columns:k.concat(j)})})}d.exports=f},{"../../utils/each":21,"./legend-navigation":15}],17:[function(b,c,a){function d(k,p,h){if(p){var m=h.reduce(function(q,r){return q+r[1]},0);var n=[];var f=[];for(var j=0;j<h.length;j++){var o=h[j][1];if(o/m>p){n.push(h[j])}else{f.push(h[j])}}var g=f.reduce(function(q,r){return q+r[1]},0);var l="Other (Generated)";k.load({unload:k.data().map(function(q){return q.id}),columns:n.concat([[l,g]])})}}c.exports=d},{}],18:[function(f,g,b){var j=f("../../utils/each");var d=f("./legend-navigation");function c(m,q){var k=m.internal.config.data_columns;var o=[];j(q.matrix[0],function(t,s){if(s>0){o.push(q.selectColumn(s))}});var l=0;var p=15;var n=Math.ceil(o.length/p);m.load({groups:[m.groups()[0].concat(["Other (Generated)"])],unload:m.data().map(function(s){return s.id}),columns:h(o,0,p)});var r=new d(m,n);r.leftNav.on("click",function(){if(l===0){return}l=l-1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})});r.rightNav.on("click",function(){if(l===n-1){return}l=l+1;r.updateCounter(l,n);m.load({unload:m.data().map(function(s){return s.id}),columns:k.concat(h(o,l,p))})})}function h(l,k,n){var o=k*n;var m=o+n;return a(l,o,m).concat(l.slice(o,m))}function a(l,q,n){var p=l.slice(0,q).concat(l.slice(n,l.length));var o=["Other (Generated)"];for(var k=1;k<p[0].length;k++){var m=p.reduce(function(s,t,r){return s+p[r][k]},0);o.push(m)}return[o]}g.exports=c},{"../../utils/each":21,"./legend-navigation":15}],19:[function(l,b,y){var k=l("spin.js");var f=l("../utils/each"),u=l("../utils/extend"),q=l("../utils/extend-deep"),j=l("../utils/assert-date-string"),t=l("../utils/pretty-number");var m=l("./c3_extentions/paginate-chart");var g=l("./c3_extentions/summarize-chart");var s=l("./c3_extentions/render-pie-chart");var o={};function a(A){var B,z;h(function(){if(B){clearTimeout(B)}z=(A.visuals.length>12)?1000:250;B=setTimeout(function(){f(A.visuals,function(C){if(C.view._artifacts.c3){C.view._artifacts.c3.resize()}})},z)});d();p();n();x();w();return o}function d(){var z=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];f(z,function(B,A){o[B]={render:function(){var E,C,D;E={axis:{},color:{},data:{order:null}};C={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:u({},this.colorMapping()),columns:[],type:B.replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}};D=q({},E,this.chartOptions());D=q(D,C);D.color.pattern=C.color.pattern;D.data.colors=C.data.colors;D.data.columns=C.data.columns;if(B==="gauge"){D.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(B==="pie"||B==="donut"){D.data.columns=this.data().slice(1)}else{if(B.indexOf("horizontal-")>-1){D.axis.rotated=true}if(j(this.data()[1][0])){D.axis.x=D.axis.x||{};D.axis.x.type="timeseries";D.axis.x.tick=D.axis.x.tick||{format:r(this.data()[1][0],this.data()[2][0])};D.data.columns[0]=[];f(this.dataset.selectColumn(0),function(F,G){if(G>0){F=new Date(F)}D.data.columns[0][G]=F});D.data.columns[0][0]="x";D.data.x="x";if(this.stacked()&&this.data()[0].length>2){D.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{D.axis.x=D.axis.x||{};D.axis.x.type="category";D.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){D.data.groups=[["Other (Generated)"].concat(this.dataset.selectRow(0).slice(1))]}}}}this.view._artifacts.c3=c3.generate(D);if(c(B,this)){m(this.view._artifacts.c3,this.dataset)}else{if(v(B,this)){g(this.view._artifacts.c3,this.dataset)}else{if(B==="donut"||B==="pie"){s(this.view._artifacts.c3,this.view.visibilityThreshold,this.data().slice(1))}else{f(this.data()[0],function(F,G){if(G>0){D.data.columns.push(this.dataset.selectColumn(G))}}.bind(this));this.view._artifacts.c3.load(D.data)}}}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function h(z){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",z,true)}else{if(window.attachEvent){window.attachEvent("onresize",z)}}}function r(B,A){var C=Math.abs(new Date(B).getTime()-new Date(A).getTime());var z=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(C>=2419200000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getFullYear()}}else{if(C>=86400000){return function(E){var D=new Date(E);return z[D.getMonth()]+" "+D.getDate()}}else{if(C>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}function c(z,B){var A=["area","bar","line","step","spline"];return A.indexOf(z)>-1&&B.data()[0].length>15&&B.paginate()&&!B.summarize()}function v(z,B){var A=["area","bar"];return A.indexOf(z)>-1&&B.data()[0].length>15&&B.summarize()}function p(){o.message={render:function(D){var B=document.createElement("div"),A=document.createElement("div"),C=document.createElement("span"),z=this.height()||140;B.className=this.theme();A.className=this.theme()+"-message";A.style.height=String(z+"px");A.style.paddingTop=(z/2-12)+"px";A.style.width=String(this.width()+"px");C.innerHTML=D||"";A.appendChild(C);B.appendChild(A);this.el().innerHTML="";this.el().appendChild(B)},update:function(){this.render()},destroy:function(){}}}function n(){o.metric={render:function(){var D=this.theme(),G=this.title(),H=this.data()[1][1]||"-",J=this.height()||140,B=this.width(),A=this.chartOptions(),E="",F="",I="",z,C;z=H;if((typeof A.prettyNumber==="undefined"||A.prettyNumber===true)&&!isNaN(parseInt(H))){z=t(H)}if(A.prefix){F='<span class="'+D+'-metric-prefix">'+A.prefix+"</span>"}if(A.suffix){I='<span class="'+D+'-metric-suffix">'+A.suffix+"</span>"}E+='<div class="'+D+'">';E+='<div class="'+D+'-metric" style="width: '+(B?B+"px":"auto")+';" title="'+H+'">';E+='<span class="'+D+'-metric-value">'+F+z+I+"</span>";if(G){E+='<span class="'+D+'-metric-title">'+G+"</span>"}E+="</div>";E+="</div>";this.el().innerHTML=E;C=this.el().querySelector("."+D+"-metric-value");C.style.paddingTop=((J-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+D+"-metric").style.height=J+"px"},update:function(){this.render()},destroy:function(){}}}function x(){var z={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};o.spinner={render:function(){var A=this.height()||z.height,B=document.createElement("div"),C=document.createElement("div");B.className=this.theme();C.className=this.theme()+"-spinner";C.style.height=String(A+"px");C.style.position="relative";C.style.width=String(this.width()+"px");B.appendChild(C);this.el().innerHTML="";this.el().appendChild(B);this.view._artifacts.spinner=new k(z).spin(C)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}function w(){var z={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};o.table={render:function(){var E=this.data(),C=this.el(),J=(this.height()||z.height)-this.el().offsetHeight,G=this.theme(),B=this.width()||z.width;var H="",I=new Array(E[0].length),K=new Array(E[0].length),A;f(E,function(L){f(L,function(M,N){if(!K[N]){K[N]=0}I[N]=(typeof M==="number")?"right":"left";K[N]=(String(M).length>K[N])?String(M).length:K[N]})});H+='<div class="'+G+'-table" style="height: '+(J?J+"px":"auto")+"; width: "+(B?B+"px":"auto")+';">';H+='<table class="'+G+'-table-dataset">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="<tbody>";for(var F=0;F<E.length;F++){if(F>0){H+="<tr>";for(var D=0;D<E[F].length;D++){H+='<td style="min-width: '+(10*K[D])+"px; text-align: "+I[D]+';">'+E[F][D]+"</td>"}H+="</tr>"}}H+="</tbody>";H+="</table>";H+='<table class="'+G+'-table-fixed-header">';H+="<thead>";H+="<tr>";for(var F=0;F<E[0].length;F++){H+='<th style="min-width: '+(10*K[F])+"px; text-align: "+I[F]+';">'+E[0][F]+"</th>"}H+="</tr>";H+="</thead>";H+="</table>";H+="</div>";C.querySelector("."+G+"-rendering").innerHTML=H;A=C.querySelector("."+G+"-table-fixed-header");C.querySelector("."+G+"-table").onscroll=function(L){A.style.top=L.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){this.el().querySelector("."+theme+"-table").onscroll=undefined}}}b.exports=a},{"../utils/assert-date-string":20,"../utils/each":21,"../utils/extend":23,"../utils/extend-deep":22,"../utils/pretty-number":24,"./c3_extentions/paginate-chart":16,"./c3_extentions/render-pie-chart":17,"./c3_extentions/summarize-chart":18,"spin.js":25}],20:[function(b,c,a){c.exports=function(f){var d;if(!isNaN(new Date(f).getTime())&&typeof f==="string"){d=f.split("-");return !isNaN(d[0])&&d[0].length===4}return false}},{}],21:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],22:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(k,j){if((typeof h[j]!=="undefined"&&typeof k!=="undefined")&&(typeof h[j]==="object"&&typeof k==="object")&&(h[j]!==null&&k!==null)){d(h[j],k)}else{h[j]=k}})}return h}},{"./each":21}],23:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],24:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],25:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[14]);
>>>>>>> style arrows in legend navigation
